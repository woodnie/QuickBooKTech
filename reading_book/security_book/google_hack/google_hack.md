#### Google hack {#google-hack}

[http://book.51cto.com/art/200905/125532.htm](http://book.51cto.com/art/200905/125532.htm)

说起 Google ，可谓无人不知无人不晓。作为世界第一的搜索引擎，其强大的搜索功能，可以让你在瞬间找到你想要的一切。不过对于普通的计算机用户而言， Google 是一个强大的搜索引擎；而对于黑客而言，则可能是一款绝佳的黑客工具。正因为 google 的检索能力强大，黑客可以构造特殊的关键字，使用 Google 搜索互联网上的相关隐私信息。通过 Google ，黑客甚至可以在几秒种内黑掉一个网站。这种利用 Google 搜索相关信息并进行入侵的过程就叫做 Google Hack 。 **搜索也是一门艺术** ~~~~~~~~ 在我们平时使用搜索引擎的过程中，通常是将需要搜索的关键字输入搜索引擎，然后就开始了漫长的信息提取过程。其实 Google 对于搜索的关键字提供了多种语法，合理使用这些语法，将使我们得到的搜索结果更加精确。当然， Google 允许用户使用这些语法的目的是为了获得更加精确的结果，但是黑客却可以利用这些语法构造出特殊的关键字，使搜索的结果中绝大部分都是存在漏洞的网站。

**下面我们先来看看** **Google** **的部分语法：** ~~~~~~~~intitle ：搜索网页标题中包含有特定字符的网页。例如输入 &quot;intitle: cbi&quot; ，这样网页标题中带有 cbi 的网页都会被搜索出来。 ~~~~~~~~inurl ：的 URL 搜索包含有特定字符。例如输入 &quot;inurl:cbi&quot; ，则可以找到带有 cbi 字符的 URL 。 ~~~~~~~~intext: 搜索网页正文内容中的指定字符，例如输入 &quot;intext:cbi&quot; 。这个语法类似我们平时在某些网站中使用的 &quot; 文章内容搜索 &quot; 功能。 ~~~~~~~~Filetype: 搜索指定类型的文件。例如输入 &quot;filetype:cbi&quot; ，将返回所有以 cbi 结尾的文件 URL 。 ~~~~~~~~Site ：找到与指定网站有联系的 URL 。例如输入 &quot;Site ： family.chinaok.com&quot; 。所有和这个网站有联系的 URL 都会被显示。 ~~~~~~~~ 这些就是 Google 的常用语法，也是 Google Hack 的必用语法。虽然这只是 Google 语法中很小的部分，但是合理使用这些语法将产生意想不到的效果。 **语法在** **Google Hack** **中的作用** ~~~~~~~~ 了解了 Google 的基本语法后，我们来看一下黑客是如何使用这些语法进行 Google Hack 的，这些语法在入侵的过程中又会起到怎样的作用呢？ ~~~~~~~~intitle~~~~~~~~intitle 语法通常被用来搜索网站的后台、特殊页面和文件，通过在 Google 中搜索 &quot;intitle: 登录 &quot; 、 &quot;intitle: 管理 &quot; 就可以找到很多网站的后台登录页面。此外， intitle 语法还可以被用在搜索文件上，例如搜索 &quot;intitle:&quot;indexof&quot;etc/shadow&quot; 就可以找到 Linux 中因为配置不合理而泄露出来的用户密码文件。 ~~~~~~~~inurl~~~~~~~~Google Hack 中， inurl 发挥的作用的最大，主要可以分为以下两个方面 : 寻找网站后台登录地址，搜索特殊 URL 。 ~~~~~~~~ 寻找网站后台登录地址：和 intitle 不同的是， inurl 可以指定 URL 中的关键字，我们都知道网站的后台 URL 都是类似 login.asp 、 admin.asp 为结尾的，那么我们只要以 &quot;inurl:login.asp&quot; 、 &quot;inurl:admin.asp&quot; 为关键字进行搜索，同样可以找到很多网站的后台。此外，我们还可以搜索一下网站的数据库地址，以 &quot;inurl:data&quot; 、 &quot;inurl:db&quot; 为关键字进行搜索即可。

1\. **寻找网站的后台登录页面** ~~~~~~~~ 搜索特殊 URL ：通过 inurl 语法搜索特殊 URL ，我们可以找到很多网站程序的漏洞，例如最早 IIS 中的 Uncode 目录遍历漏洞，我们可以构造 &quot;inurl: ／ winnt ／ system32 ／ cmd exe? ／ c+dir&quot; 这样的关键字进行搜索，不过目前要搜索到存在这种古董漏洞的网站是比较困难的。再比如前段日子很火的上传漏洞，我们使用 &quot;&quot;inurl:upload.asp&quot; 或 &quot;inurl:upload_soft.asp&quot; 即可找到很多上传页面，此时再用工具进行木马上传就可以完成入侵。

~~~~~~~~intext~~~~~~~~intext 的作用是搜索网页中的指定字符，这貌似在 Google Hack 中没有什么作用，不过在以 &quot;intext:to parent directory&quot; 为关键字进行搜索后，我们会很惊奇的发现，无数网站的目录暴露在我们眼前。我们可以在其中随意切换目录，浏览文件，就像拥有了一个简单的 Webshell 。形成这种现象的原因是由于 IIS 的配置疏忽。同样，中文 IIS 配置疏忽也可能出现类似的漏洞，我们用 &quot;intext: 转到父目录 &quot; 就可以找到很多有漏洞的中文网站。

**2.** **随意浏览网站中的文件** ~~~~~~~~Filetype~~~~~~~~Filetype 的作用是搜索指定文件。假如我们要搜索网站的数据库文件，那么可以以 &quot;filetype:mdb&quot; 为关键字进行搜索，很快就可以下载到不少网站的数据库文件。当然， Filetype 语法的作用不仅于此，在和其他语法配合使用的时候更能显示出其强大作用。 ~~~~~~~~Site~~~~~~~~ 黑客使用 Site ，通常都是做入侵前的信息刺探。 Site 语法可以显示所有和目标网站有联系的页面，从中或多或少存在一些关于目标网站的资料，这对于黑客而言就是入侵的突破口，是关于目标网站的一份详尽的报告。 **语法组合，威力加倍** ~~~~~~~~ 虽然上文中介绍的这几个语法能各自完成入侵中的一些步骤，但是只使用一个语法进行入侵，其效率是很低下的。 Google Hack 的威力在于能将多个语法组合起来，这样就可以快速地找到我们需要的东西。下面我们来模拟黑客是如何使用 Google 语法组合来入侵一个网站的。

~~~~ **信息刺探** ~~~~~~~~ 黑客想入侵一个网站，通常第一步都是对目标网站进行信息刺探。这时可以使用 &quot;Site: 目标网站 &quot; 来获取相关网页，从中提取有用的资料。 **3.** **搜索相关页面** ~~~~~~~~ 下载网站的数据库 ~~~~~~~~ 搜索 &quot;Site: 目标网站 Filetype:mdb&quot; 就可以寻找目标网站的数据库，其中的 Site 语法限定搜索范围， Filetype 决定搜索目标。用这种方法有一个缺点，就是下载到数据库的成功率较低。在这里我们还可以采用另一种语法组合，前提是目标网站存在 IIS 配置缺陷，即可以随意浏览站点文件夹，我们搜索 &quot;Site: 目标网站 intext:to parent directory&quot; 来确定其是否存在此漏洞。在确定漏洞存在后，可以使用 &quot;Site: 目标网站 intext:to parent directory+intext.mdb&quot; 进行数据库的搜索。

**4.** **找到网站数据库** ~~~~ **登录后台管理** ~~~~~~~~ 下载到数据库后，我们就可以从中找到网站的管理员帐户和密码，并登录网站的后台。对于网站后台的查找，可以使用语法组合 &quot;Site: 目标网站 intitle: 管理 &quot; 或者 &quot;Site: 目标网站 inurl:login.asp&quot; 进行搜索，当然我们可以在这里进行联想，以不同的字符进行搜索，这样就有很大的概率可以找到网站的后台管理地址。接下去黑客就可以在后台上传 Webshll ，进一步提升权限，在此不再阐述。 ~~~ **利用其他漏洞** ~~~~~~~~ 如果下载数据库不成功，我们还可以尝试其他的入侵方法。例如寻找上传漏洞，搜索 &quot;Site: 目标网站 inurl:upload.asp&quot; 。此外，我们还可以根据一些程序漏洞的特征，定制出 Google Hack 的语句。 ~~~~~~~~Google Hack 可以灵活地组合法语，合理的语法组合将使入侵显得易如反掌，再加入自己的搜索字符， Google 完全可以成为你独一无二的黑客工具。 **合理设置，防范** **Google Hack** ~~~~ **5\. 合理设置网站** ~~~~~~~~Google Hack 貌似无孔不入，实则无非是利用了我们配置网站时的疏忽。例如上文中搜索 &quot;intext:to parent directory&quot; 即可找到很多可以浏览目录文件的网站，这都是由于没有设置好网站权限所造成的。在 IIS 中，设置用户访问网站权限时有一个选项，叫做 &quot; 目录浏览 &quot; ，如果你不小心选中了该项，那么其结果就如上文所述，可以让黑客肆意浏览你网站中的文件。 ~~~~~~~~ 这种漏洞的防范方法十分简单，在设置用户权限时不要选中 &quot; 目录浏览 &quot; 选项即可。

**6.** **不要选中该项** ~~~~~~~~ 编写 robots.txt 文件 ~~~~~~~~robot.txt 是专门针对搜索引擎机器人 robot 编写的一个纯文本文件。我们可以在这个文件中说明网站中不想被 robot 访问的部分，这样，我们网站的部分或全部内容就可以不被搜索引擎收录了，或者让搜索引擎只收录指定的内容。因此我们可以利用 robots.txt 让 Google 的机器人访问不了我们网站上的重要文件， Google Hack 的威胁也就不存在了。 ~~~~~~~~ 编写的 robots.txt 文件内容如下： User-agent: * Disallow: /data/Disallow: /db/ ~~~~~~~~ 其中 &quot;Disallow&quot; 参数后面的是禁止 robot 收录部分的路径，例如我们要让 robot 禁止收录网站目录下的 &quot;data&quot; 文件夹，只需要在 Disallow 参数后面加上 &quot;/data/&quot; 即可。如果想增加其他目录，只需按此格式继续添加。文件编写完成后将其上传到网站的根目录，就可以让网站远离 Google Hack 了